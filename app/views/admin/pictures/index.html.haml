%h2 Pictures
.well
  = search_form_for @search, url: admin_pictures_path, html: { class: 'form-inline', method: :get } do |f|
    = f.text_field :title_cont, placeholder: 'Title', skip_label: true
    = f.text_field :alt_text_cont, placeholder: 'Alt Text', skip_label: true
    = f.text_field :caption_cont, placeholder: 'Caption', skip_label: true
    = f.button '<span class="glyphicon glyphicon-search"></span> Search'.html_safe, class: 'btn btn-primary'
    = link_to '<span class="glyphicon glyphicon-remove"></span>'.html_safe, admin_pictures_path, class: 'btn btn-default', rel: 'tooltip', title: 'Clear Search'
- if policy(Picture).create?
  .clearfix
    = link_to 'New Picture', new_admin_picture_path, class: 'btn btn-primary pull-right'
  = form_for [:admin, Picture.new], html: { id: 'new_picture-fileupload', data: { accept: 'gif|jpe?g|png' } } do |f|
    = f.file_field :image, name: 'picture[image]', class: 'hidden'
.table-responsive
  %table{ class: "table table-striped table-hover#{' hidden' unless @pictures.present?}" }
    %thead
      %tr.row
        %th.col-xs-3 Thumbnail
        %th.col-xs-3= sort_link @search, :title
        %th.col-xs-2= sort_link @search, :role
        %th.col-xs-2= sort_link @search, :created_at
        %th.col-xs-1
        %th.col-xs-1
    %tbody
      - @pictures.each do |picture|
        - present picture do |picture_presenter|
          %tr.row.picture
            %td.col-xs-3.thumb= link_to picture_presenter.thumbnail_image_tag, admin_picture_path(picture)
            %td.col-xs-3.title= link_to picture_presenter.title, admin_picture_path(picture)
            %td.col-xs-2.created-at= picture_presenter.created_at
            %td.col-xs-1.edit
              - if policy(picture).edit?
                = icon_edit_link edit_admin_picture_path(picture)
            %td.col-xs-1.delete
              - if policy(picture).destroy?
                = icon_delete_link admin_picture_path(picture)
= paginate @pictures
- unless @pictures.present?
  %p.lead There are no pictures yet. Click 'New Picture' to get started.
%script#template-upload{ type: 'text/x-tmpl' }
  <div class="upload">
  {%=o.name%}
  <div class="progress progress-striped active">
  <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>
  </div>
  </div>
