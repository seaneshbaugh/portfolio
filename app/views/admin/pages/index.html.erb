<h2>Pages</h2>
<p>This is a list of all the site's pages. From here you can view, modify, or delete any page on the site.</p>
<%= link_to "New Page", new_admin_page_path %>
<%= form_tag edit_multiple_admin_pages_path, :id => "pages-index-form", :method => :get do %>
<table>
	<thead>
		<tr>
			<th scope="col">
				<input class="check-all" type="checkbox">
			</th>
			<th scope="col">
				<% if params[:sort] == "id" and params[:order] == "ASC" %>
					<%= link_to "ID", admin_pages_path(:order => "DESC", :sort => :id) %>
				<% else %>
					<%= link_to "ID", admin_pages_path(:order => "ASC", :sort => :id) %>
				<% end %>
			</th>
			<th scope="col">
				<% if params[:sort] == "title" and params[:order] == "ASC" %>
					<%= link_to "Title", admin_pages_path(:order => "DESC", :sort => :title) %>
				<% else %>
					<%= link_to "Title", admin_pages_path(:order => "ASC", :sort => :title) %>
				<% end %>
			</th>
			<th scope="col">
				Body
			</th>
			<th scope="col">
				Style
			</th>
			<th scope="col">
				<% if params[:sort] == "parent_id" and params[:order] == "ASC" %>
					<%= link_to "Parent Page", admin_pages_path(:order => "DESC", :sort => :parent_id) %>
				<% else %>
					<%= link_to "Parent Page", admin_pages_path(:order => "ASC", :sort => :parent_id) %>
				<% end %>
			</th>
			<th scope="col">
				<% if params[:sort] == "status" and params[:order] == "ASC" %>
					<%= link_to "Status", admin_pages_path(:order => "DESC", :sort => :status) %>
				<% else %>
					<%= link_to "Status", admin_pages_path(:order => "ASC", :sort => :status) %>
				<% end %>
			</th>
			<th scope="col">
				<% if params[:sort] == "private" and params[:order] == "ASC" %>
					<%= link_to "Private", admin_pages_path(:order => "DESC", :sort => :private) %>
				<% else %>
					<%= link_to "Private", admin_pages_path(:order => "ASC", :sort => :private) %>
				<% end %>
			</th>
			<th scope="col">
				<% if params[:sort] == "created_at" and params[:order] == "ASC" %>
					<%= link_to "Created At", admin_pages_path(:order => "DESC", :sort => :created_at) %>
				<% else %>
					<%= link_to "Created At", admin_pages_path(:order => "ASC", :sort => :created_at) %>
				<% end %>
			</th>
			<th scope="col">
				<% if params[:sort] == "updated_at" and params[:order] == "ASC" %>
					<%= link_to "Updated At", admin_pages_path(:order => "DESC", :sort => :updated_at) %>
				<% else %>
					<%= link_to "Updated At", admin_pages_path(:order => "ASC", :sort => :updated_at) %>
				<% end %>
			</th>
			<th scope="col">
				Actions
			</th>
		</tr>
	</thead>
	<tbody>
		<% even_row = false %>
		<% @pages.each do |page| %>
			<tr class="<% if even_row %>even<% else %>odd<% end %><% even_row = !even_row %>">
				<td><%= check_box_tag "pages_ids[]", page.id %></td>
				<td><%= link_to page.id, admin_page_path(page) %></td>
				<td><%= link_to page.title, admin_page_path(page) %></td>
				<td><%= truncate(page.body) %></td>
				<td><%= truncate(page.style) %></td>
				<td><% if page.parent %><%= link_to page.parent.title, admin_page_path(page.parent) %><% else %>-<% end %></td>
				<td>
					<%= case page.status
						when 0
							"Draft"
						when 1
							"Published"
						when 2
							"Awaiting Review"
						else
							"Unknown"
						end
					%>
				</td>
				<td><% if page.private %>Yes<% else %>No<% end %></td>
				<td><%= page.created_at.strftime("%Y-%m-%d %H:%M:%S") %></td>
				<td><%= page.updated_at.strftime("%Y-%m-%d %H:%M:%S") %></td>
				<td>
					<%= link_to image_tag(image_path("icons/16x16/edit.png"), :title => "Edit", :alt => "Edit"), edit_admin_page_path(page) %>
					<%= link_to image_tag(image_path("icons/16x16/remove.png"), :title => "Delete", :alt => "Delete"), admin_page_path(page), :method => :delete %>
				</td>
			</tr>
		<% end %>
	</tbody>
</table>
<%= submit_tag "Edit Selected", :class => "button", :disabled => true, :id => "edit-selected-button" %>
<% end %>
<%= paginate @pages %>
